<template>
   <template if:true={isOpen}>
      <!-- Modal -->
      <template if:true={colors.length}>
         <section class="slds-modal slds-fade-in-open container">
            <div class="note-container">

               <!-- Modal Header -->
               <header class="note-header">

                  <div class="note-color">
                     <template for:each={colors} for:item="color">
                        <div onclick={handleChangeColor} data-code={color.code} class="color-box" key={color}></div>
                     </template>
                  </div>

                  <div class=" btn">
                     <!-- Show saving spinner -->
                     <template if:true={isSaving}>
                        <lightning-icon icon-name="utility:refresh" alternative-text="Saving..." size="x-small"
                           class="spin"></lightning-icon>
                     </template>

                     <!-- Show tick icon after save -->
                     <template if:true={isSaved}>
                        <lightning-icon icon-name="utility:success" alternative-text="Saved" size="x-small"
                           class="success-icon"></lightning-icon>
                     </template>

                     <button class="close-button" title="Close" onclick={handleClose}>
                        <lightning-icon icon-name="utility:close" alternative-text="close"
                           size="x-small"></lightning-icon>
                     </button>
                  </div>

               </header>

               <!-- Modal Content -->
               <div class="note-content">
                  <input class="title-input" type="text" value={noteTitle} name="title" placeholder="Title"
                     data-id="title" oninput={handleInputChange} maxlength="50" />
                  <textarea class="note-textarea" placeholder="Take a note..." data-id="description"
                     oninput={handleInputChange}>{noteDescription}</textarea>
               </div>

               <!-- Modal Footer -->
               <template if:true={objectId}>
                  <footer class="note-footer">
                     <lightning-input type="checkbox" checked={isObject} disabled={isAllFill}
                        label="Associate with current record" onchange={handleCheckboxChange}>
                     </lightning-input>
                  </footer>
               </template>
            </div>
         </section>
      </template>

      <!-- Backdrop -->
      <div class="slds-backdrop slds-backdrop_open"></div>
   </template>
</template>